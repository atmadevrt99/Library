<%@ Page Title="" Language="C#" MasterPageFile="~/librarian/MasterPage.Master" AutoEventWireup="true" CodeBehind="returnbook.aspx.cs" Inherits="Library.librarian.WebForm10" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <center>
        <h3 style="width:500px; text-align: center;background-color:purple;color:white">Return Book</h3>
        <tr>
            <td>
                <asp:Label ID="Label1" runat="server" Text="USER ID"  style="color:purple"></asp:Label>
            </td>
            <td>
                <asp:TextBox ID="search" runat="server"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*" ControlToValidate="search"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <asp:GridView ID="gvReturn" runat="server" AutoGenerateColumns="false" 
            Width="748px" BackColor="white" BorderColor="#f7f7f7" 
            BorderWidth="1px" CellPadding="2" ForeColor="Black" GridLines="None" 
             style="text-align: center" AutoGenerateDeleteButton="false" DataSourceID="SqlDataSource1" DataKeyNames="I_ID">
            <AlternatingRowStyle BackColor="#dfdfdf" />
            <Columns>

                <asp:BoundField DataField="I_ID" HeaderText="Issue ID" SortExpression="user_id" />
                <asp:BoundField DataField="USER_ID" HeaderText="User ID" SortExpression="user_name" />
                <asp:BoundField DataField="BOOK_ID" HeaderText="Book ID" SortExpression="user_pwd" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton ID="delbut" runat="server" OnClientClick="return confirm('Are You sure?');" CommandName="Delete">Delete</asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            <FooterStyle BackColor="Tan" />
            <HeaderStyle BackColor="purple" ForeColor="White" Font-Bold="True" />
            <PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" 
                HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" />
            <SortedAscendingCellStyle BackColor="#FAFAE7" />
            <SortedAscendingHeaderStyle BackColor="#DAC09E" />
            <SortedDescendingCellStyle BackColor="#E1DB9C" />
            <SortedDescendingHeaderStyle BackColor="#C2A47B" />
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:globalconnectionstring %>"
            SelectCommand="select [I_ID],[USER_ID], [BOOK_ID] from [Issue_Details] where USER_ID='search.Text'"
            DeleteCommand="delete from Issue_Details where I_ID = @I_ID">
            <UpdateParameters>
                <asp:Parameter Name="user_name" />
                <asp:Parameter Name="user_pwd" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="user_id" />
            </DeleteParameters>
        </asp:SqlDataSource>
    </center>
</asp:Content>